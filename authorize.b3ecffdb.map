{"version":3,"sources":["js/authorize.js"],"names":["Promise","TrelloPowerUp","t","iframe","apiKey","arg","trelloAuthUrl","window","location","origin","tokenLooksValid","token","test","document","getElementById","addEventListener","authorize","height","width","validToken","then","set","closePopup"],"mappings":";AAAA,IAAIA,UAAUC,cAAcD,OAA5B;AACA,IAAIE,IAAID,cAAcE,MAAd,EAAR;;AAEA,IAAIC,SAASF,EAAEG,GAAF,CAAM,QAAN,CAAb,EAA8B;;AAE9B;AACA,IAAIC,2HAAyHF,MAAzH,6CACFG,OAAOC,QAAP,CAAgBC,MADd,IAED,sCAAkD,EAFjD,0BAAJ;;AAIA,IAAIC,kBAAkB,SAAlBA,eAAkB,CAASC,KAAT,EAAgB;AACpC;AACA,SAAO,kBAAiBC,IAAjB,CAAsBD,KAAtB;AAAP;AACD,CAHD;;AAKAE,SAASC,cAAT,CAAwB,UAAxB,EAAoCC,gBAApC,CAAqD,OAArD,EAA8D,YAAW;AACvEb,IACGc,SADH,CACaV,aADb,EAC4B;AACxBW,YAAQ,GADgB;AAExBC,WAAO,GAFiB;AAGxBC,gBAAYT;AAHY,GAD5B,EAMGU,IANH,CAMQ,UAAST,KAAT,EAAgB;AACpB;AACA,WAAOT,EAAEmB,GAAF,CAAM,QAAN,EAAgB,SAAhB,EAA2B,OAA3B,EAAoCV,KAApC,CAAP;AACD,GATH,EAUGS,IAVH,CAUQ,YAAW;AACf;AACA;AACA,WAAOlB,EAAEoB,UAAF,EAAP;AACD,GAdH;AAeD,CAhBD","file":"authorize.b3ecffdb.map","sourceRoot":"..","sourcesContent":["var Promise = TrelloPowerUp.Promise;\nvar t = TrelloPowerUp.iframe();\n\nvar apiKey = t.arg(\"apiKey\"); // Passed in as an argument to our iframe\n\n// var trelloAuthUrl = `https://trello.com/1/authorize?expiration=1hour&name=Example%20Trello%20Power-Up&scope=read,write&key=${apiKey}&callback_method=fragment&return_url=${window.location.origin}%2Fauth-success.html`;\nvar trelloAuthUrl = `https://trello.com/1/authorize?expiration=never&name=Example%20Trello%20Power-Up&scope=read,write&key=${apiKey}&callback_method=fragment&return_url=${\n  window.location.origin\n}${process.env.PUBLIC_URL ? process.env.PUBLIC_URL : \"\"}%2Fauth-success.html`;\n\nvar tokenLooksValid = function(token) {\n  // If this returns false, the Promise won't resolve.\n  return /^[0-9a-f]{64}$/.test(token);\n};\n\ndocument.getElementById(\"auth-btn\").addEventListener(\"click\", function() {\n  t\n    .authorize(trelloAuthUrl, {\n      height: 680,\n      width: 580,\n      validToken: tokenLooksValid\n    })\n    .then(function(token) {\n      // store the token in Trello private Power-Up storage\n      return t.set(\"member\", \"private\", \"token\", token);\n    })\n    .then(function() {\n      // now that we have the token we needed lets go on to letting\n      // the user do whatever they need to do.\n      return t.closePopup();\n    });\n});\n"]}